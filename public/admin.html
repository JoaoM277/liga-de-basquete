<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Liga de Basquete</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .admin-container {
            max-width: 90%;
            margin: 40px auto;
            padding: 40px;
            background-color: #2a2a2a;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            color: #fff;
        }

        .admin-container h2 {
            font-size: 2rem;
            color: #e8590c;
            text-align: center;
            margin-bottom: 20px;
        }

        .admin-container .list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            gap: 10px;
        }

        .admin-container .list-header h3 {
            font-size: 1.5rem;
            color: #d4af37;
        }

        .admin-container .button-container {
            display: flex;
            gap: 10px;
        }

        .admin-container button {
            background-color: #e8590c;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .admin-container button:hover {
            background-color: #f48024;
        }

        .admin-container table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .admin-container th, .admin-container td {
            padding: 12px;
            border: 1px solid #444;
            text-align: left;
            word-wrap: break-word;
        }

        .admin-container th {
            background-color: #e8590c;
            color: #fff;
            font-weight: bold;
        }

        .admin-container tr:nth-child(even) {
            background-color: #3f3f3f;
        }

        .admin-container .table-wrapper {
            overflow-x: auto;
            margin-bottom: 40px;
        }

        /* Estilos específicos para a coluna de Ações */
        .admin-container .actions-column {
            display: flex;
            gap: 5px;
        }

        .admin-container .actions-column a,
        .admin-container .actions-column button {
            background: none;
            border: none;
            padding: 0;
            cursor: pointer;
            font-size: 1rem;
            color: #d4af37;
        }

        .admin-container .actions-column a:hover,
        .admin-container .actions-column button:hover {
            color: #fff;
        }

        @media (max-width: 768px) {
            .admin-container {
                padding: 20px;
            }

            .admin-container h2 {
                font-size: 1.5rem;
            }

            .admin-container .list-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>

<div class="admin-container">
    <h2>PAINEL ADMINISTRATIVO</h2>

    <div class="list-header">
        <h3>Atletas Masculinos</h3>
        <div class="button-container">
            <button onclick="imprimirTabela('tabelaMasculina')">Imprimir Lista</button>
        </div>
    </div>
    <div class="table-wrapper">
        <table id="tabelaMasculina">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Idade</th>
                    <th>Posição</th>
                    <th>Tempo Jogando</th>
                    <th>Contato</th>
                    <th>Turno</th>
                    <th>Dias</th>
                </tr>
            </thead>
            <tbody>
                </tbody>
        </table>
    </div>

    <div class="list-header">
        <h3>Atletas Femininos</h3>
        <div class="button-container">
            <button onclick="imprimirTabela('tabelaFeminina')">Imprimir Lista</button>
        </div>
    </div>
    <div class="table-wrapper">
        <table id="tabelaFeminina">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Idade</th>
                    <th>Posição</th>
                    <th>Tempo Jogando</th>
                    <th>Contato</th>
                    <th>Turno</th>
                    <th>Dias</th>
                </tr>
            </thead>
            <tbody>
                </tbody>
        </table>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        try {
            const response = await fetch('/api/inscricoes');
            if (!response.ok) {
                throw new Error('Erro ao carregar os dados.');
            }
            const inscricoes = await response.json();

            const tabelaMasculina = document.getElementById('tabelaMasculina').getElementsByTagName('tbody')[0];
            const tabelaFeminina = document.getElementById('tabelaFeminina').getElementsByTagName('tbody')[0];

            inscricoes.forEach(inscrito => {
                const newRow = document.createElement('tr');
                newRow.innerHTML = `
                    <td>${inscrito.nome_completo}</td>
                    <td>${inscrito.idade}</td>
                    <td>${inscrito.posicao}</td>
                    <td>${inscrito.tempo_jogando}</td>
                    <td>${inscrito.contato}</td>
                    <td>${inscrito.turnos ? inscrito.turnos.join(', ') : 'N/A'}</td>
                    <td>${inscrito.dias ? inscrito.dias.join(', ') : 'N/A'}</td>
                `;
                
                if (inscrito.sexo === 'Masculino') {
                    tabelaMasculina.appendChild(newRow);
                } else if (inscrito.sexo === 'Feminino') {
                    tabelaFeminina.appendChild(newRow);
                }
            });

        } catch (error) {
            console.error('Falha ao carregar inscrições:', error);
            alert('Não foi possível carregar as inscrições. Tente novamente mais tarde.');
        }
    });

    function imprimirTabela(tabelaId) {
        const tabela = document.getElementById(tabelaId);
        if (!tabela) {
            alert("Tabela não encontrada.");
            return;
        }

        const win = window.open('', 'print');
        win.document.write('<html><head><title>Imprimir</title>');
        win.document.write('<style>');
        win.document.write('body { font-family: sans-serif; }');
        win.document.write('table { width: 100%; border-collapse: collapse; margin-top: 20px; }');
        win.document.write('th, td { padding: 8px; border: 1px solid #ccc; text-align: left; }');
        win.document.write('th { background-color: #f2f2f2; }');
        win.document.write('</style>');
        win.document.write('</head><body>');
        win.document.write('<h1>Lista de Inscrições</h1>');
        win.document.write(tabela.outerHTML);
        win.document.write('</body></html>');
        win.document.close();
        win.print();
    }
</script>

</body>
</html>